# ğŸ“Š AnÃ¡lise TÃ©cnica do Projeto: App Lendismart V3

---

## âœ… OBJETIVO GERAL

Desenvolver uma aplicaÃ§Ã£o profissional em **Streamlit**, com interface acessÃ­vel via **telemÃ³vel e PC**, para **gestÃ£o completa do processo de intermediaÃ§Ã£o de crÃ©dito automÃ³vel**, com foco em:

- ReduÃ§Ã£o de erros
- Ganhos de tempo
- EstruturaÃ§Ã£o e histÃ³rico de propostas
- GeraÃ§Ã£o de documentaÃ§Ã£o (PDF, API)
- PreparaÃ§Ã£o para automaÃ§Ã£o via CRM e integraÃ§Ãµes com financeiras

---

## ğŸ§± ESTRUTURA DA APLICAÃ‡ÃƒO

### ğŸ—‚ Menu Lateral (versÃ£o aprovada)
Renomeado para "ğŸ“ Menu proposta":

1. **ğŸ“Š Simulador**
2. **ğŸ“„ Cliente - 1Âº Titular**
3. **ğŸ“„ Cliente - 2Âº Titular**
4. **ğŸ“„ Cliente - Avalista**
5. **ğŸ“„ Cliente - Empresa**
6. **ğŸš— Viatura**
7. **ğŸ“„ Proposta resumo**

---

## ğŸ” ANÃLISE DE CADA SEPARADOR

### 1. ğŸ“Š Simulador
- Primeira etapa do processo.
- GeraÃ§Ã£o de dados da simulaÃ§Ã£o financeira.
- CÃ¡lculos automÃ¡ticos: Valor a financiar, comissÃ£o, rentabilidade.
- Campos agrupados visualmente (3/linha).
- Destaque para "Valor a Financiar" com fonte grande e cor vermelha.
- SeÃ§Ã£o "ğŸ“‰ ComissÃµes" com:
  - ComissÃ£o PV
  - T para stand
  - Margem broker (% e â‚¬)
  - ComissÃ£o comercial (% e â‚¬)
  - Valor seguros (se aplicÃ¡vel)
- TODOS os campos calculam em tempo real.

### 2. ğŸ“„ Cliente - 1Âº Titular
- FormulÃ¡rio completo com:
  - Documento de identificaÃ§Ã£o
  - Dados pessoais
  - Contactos
  - Dados profissionais
  - Rendimentos com cÃ¡lculo automÃ¡tico de vencimento lÃ­quido A e B
  - Checklist de documentos com estado (OK / Falta) + observaÃ§Ãµes
  - BotÃ£o de gerar PDF com documentos em falta
- GeraÃ§Ã£o automÃ¡tica do identificador interno da proposta.

### 3. ğŸ“„ Cliente - 2Âº Titular
- Estrutura **idÃªntica** ao 1Âº titular.
- Totalmente independente (cada titular com os seus dados).
- Corrigido bug anterior onde alterava os dados nos outros separadores.

### 4. ğŸ“„ Cliente - Avalista
- Estrutura idÃªntica ao 1Âº titular.
- Dados independentes, incluindo:
  - Documentos, vencimentos, PEP, etc.
- TambÃ©m usado para representar sÃ³cios de empresa quando necessÃ¡rio.

### 5. ğŸ“„ Cliente - Empresa
- Inclui:
  - Dados da empresa (NIPC, nome, contacto, e-mail)
  - Fornecedor (stand)
  - CÃ³digos CertidÃ£o Comercial e RCBE
  - IBAN formatado
  - Morada completa com cÃ³digo postal
- Checklist de documentos exigidos para NIF 5xx
  - CertidÃ£o permanente
  - IRC, IES, RCBE, etc.
  - CC e morada dos sÃ³cios
- BotÃ£o de exportar PDF dos documentos em falta.
- BotÃµes de **Gravar / Editar** incluÃ­dos.

### 6. ğŸš— Viatura
- Campos especÃ­ficos:
  - Data da 1Âª matrÃ­cula (min: 1980)
  - Categoria (drop)
  - MatrÃ­cula com formataÃ§Ã£o vÃ¡lida (AA-00-AA, etc.)
  - NÂº chassis (17 caracteres)
  - Marca, modelo, versÃ£o
  - NÂº portas, potÃªncia, cilindrada, peso bruto
  - Campo "VeÃ­culo Importado"
- Campos replicam informaÃ§Ã£o do simulador para consistÃªncia.
- Inclui botÃ£o de **Gravar / Editar**.

### 7. ğŸ“„ Proposta resumo
- Consolida todos os dados:
  - Titulares (drop-down), Avalista, Empresa
  - Dados da simulaÃ§Ã£o e viatura (preenchidos automaticamente)
  - IBAN validado
  - Stand e SimulaÃ§Ã£o selecionada
  - SeÃ§Ã£o Financeiras:
    - NÂº proposta
    - Data
    - DecisÃ£o (drop)
    - ObservaÃ§Ãµes
    - BotÃ£o individual de exportaÃ§Ã£o por financeira
- BotÃ£o final: "ğŸ“¥ Exportar Proposta"
- BotÃµes estÃ£o **fora do formulÃ¡rio** para evitar erros.
- Em breve: funcionalidade real de geraÃ§Ã£o de PDFs e preenchimento automÃ¡tico para backoffice ou APIs.

---

## ğŸ“‚ ORGANIZAÃ‡ÃƒO DE CÃ“DIGO

- `main.py`: gestor do menu e navegaÃ§Ã£o
- `/modules`: cada separador com seu ficheiro
- `validador.py`: script de validaÃ§Ãµes (ex: NIF, IBAN, e-mail, datas, etc.)
- `utils`: utilitÃ¡rios de gravaÃ§Ã£o em Google Sheets e exportaÃ§Ã£o PDF

---

## ğŸ§  FUNCIONALIDADES TÃ‰CNICAS IMPLEMENTADAS

- GravaÃ§Ã£o em Google Sheets
- CÃ¡lculos em tempo real com base em inputs
- GeraÃ§Ã£o de identificadores automÃ¡ticos
- ValidaÃ§Ãµes ao digitar (NIF, NISS, IBAN, e-mail, datas)
- Separadores e inputs completamente independentes
- PDF de documentos em falta
- Checklist dinÃ¢mico por tipo de cliente
- Interface responsiva (PC e smartphone)
- Agrupamento visual inteligente (3-4 campos por linha)
- NavegaÃ§Ã£o consistente e menu fixo

---

## ğŸ§­ ONDE ESTAMOS

âœ”ï¸ Estrutura de front-end aprovada  
âœ”ï¸ Todos os formulÃ¡rios prontos e funcionais  
âœ”ï¸ LÃ³gica de cÃ¡lculo e validaÃ§Ãµes implementadas  
âœ”ï¸ Layout consistente e aprovado  
âœ”ï¸ Menu finalizado  
âœ”ï¸ Base de dados conectada ao Google Sheets  
âœ”ï¸ Interface pronta para uso interno

---

## ğŸš§ O QUE FALTA IMPLEMENTAR

### ğŸ”¹ Fase 1 (curto prazo)
- Implementar botÃ£o **"Exportar Proposta"** (PDF completo)
- Ativar exportaÃ§Ãµes por financeira
- Criar histÃ³rico de propostas gravadas com funÃ§Ã£o de "Editar"

### ğŸ”¹ Fase 2 (mÃ©dio prazo)
- IntegraÃ§Ã£o com APIs de financeiras (auto-preenchimento)
- IntegraÃ§Ã£o com CRM Pipedrive
- MÃ³dulo de mensagens WhatsApp / e-mail (envio direto)
- ExportaÃ§Ã£o em Excel

---

## ğŸ¯ VISÃƒO FINAL DO PROJETO

Uma aplicaÃ§Ã£o robusta e intuitiva que permita:

- Registar todas as propostas com detalhe
- Reduzir o erro humano
- Consultar e editar propostas anteriores
- Exportar facilmente para PDF, Excel ou sistemas externos
- Aumentar a velocidade e rigor no envio das propostas Ã s financeiras
- Preparar o sistema para **automaÃ§Ã£o total com integraÃ§Ã£o por API**

---

**Qualquer passo futuro serÃ¡ feito SEM alterar estrutura jÃ¡ aprovada.**